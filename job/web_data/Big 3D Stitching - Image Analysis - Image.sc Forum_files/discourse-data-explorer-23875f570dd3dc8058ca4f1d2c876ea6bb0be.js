define("discourse/plugins/discourse-data-explorer/admin/adapters/query",["exports","admin/adapters/build-plugin"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.default)("explorer").extend({})})),define("discourse/plugins/discourse-data-explorer/discourse/components/code-view",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"hJGo4SJm",block:'[[[10,"pre"],[12],[10,"code"],[15,0,[30,1]],[12],[1,[30,2]],[13],[13]],["@codeClass","@value"],false,["pre","code"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/code-view.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"code-view"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/data-explorer-bar-chart",["exports","@ember/component","@glimmer/component","@ember/object","discourse/lib/decorators","discourse/lib/load-script","discourse/plugins/discourse-data-explorer/discourse/lib/themeColor","@ember/template-factory"],(function(e,t,r,s,o,i,n,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const l=(0,a.createTemplateFactory)({id:"Qxy000nV",block:'[[[11,"canvas"],[4,[38,1],[[30,0,["initChart"]]],null],[4,[38,2],["change",[30,0,["updateChartData"]]],null],[12],[13]],[],false,["canvas","did-insert","on"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/data-explorer-bar-chart.hbs",isStrictMode:!1})
class u extends r.default{chart
barsColor=(()=>(0,n.default)("--tertiary"))()
barsHoverColor=(()=>(0,n.default)("--tertiary-high"))()
gridColor=(()=>(0,n.default)("--primary-low"))()
labelsColor=(()=>(0,n.default)("--primary-medium"))()
willDestroy(){super.willDestroy(...arguments),this.chart.destroy()}get config(){return{type:"bar",data:this.data,options:this.options}}get data(){return{labels:this.args.labels,datasets:[{label:this.args.datasetName,data:this.args.values,backgroundColor:this.barsColor,hoverBackgroundColor:this.barsHoverColor}]}}get options(){return{scales:{legend:{labels:{fontColor:this.labelsColor}},xAxes:[{gridLines:{color:this.gridColor,zeroLineColor:this.gridColor},ticks:{fontColor:this.labelsColor}}],yAxes:[{gridLines:{color:this.gridColor,zeroLineColor:this.gridColor},ticks:{beginAtZero:!0,fontColor:this.labelsColor}}]}}}async initChart(e){await(0,i.default)("/javascripts/Chart.min.js")
const t=e.getContext("2d")
this.chart=new Chart(t,this.config)}static#e=(()=>dt7948.n(this.prototype,"initChart",[o.bind]))()
updateChartData(){this.chart.data=this.data,this.chart.update()}static#t=(()=>dt7948.n(this.prototype,"updateChartData",[s.action]))()}e.default=u,(0,t.setComponentTemplate)(l,u)})),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","@ember/utils","discourse/lib/decorators","@ember/template-factory"],(function(e,t,r,s,o,i,n,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const l=(0,a.createTemplateFactory)({id:"pxgFj/Wg",block:'[[[41,[30,0,["hideSchema"]],[[[1,"  "],[8,[39,1],[[24,0,"no-text unhide"]],[["@action","@icon"],[[30,0,["expandSchema"]],"chevron-left"]],null],[1,"\\n"]],[]],[[[1,"  "],[10,0],[14,0,"schema"],[12],[1,"\\n    "],[10,0],[14,0,"schema-search inline-form full-width"],[12],[1,"\\n      "],[11,"input"],[24,4,"text"],[4,[38,4],["input",[28,[37,5],[[30,0],"filterChanged"],[["value"],["target.value"]]]],null],[12],[13],[1,"\\n      "],[8,[39,1],[[24,0,"no-text"]],[["@action","@icon"],[[30,0,["collapseSchema"]],"chevron-right"]],null],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"schema-container"],[12],[1,"\\n      "],[8,[39,6],null,[["@condition"],[[30,0,["loading"]]]],[["default"],[[[[1,"\\n        "],[10,"ul"],[12],[1,"\\n"],[42,[28,[37,9],[[28,[37,9],[[30,0,["filteredTables"]]],null]],null],null,[[[1,"            "],[8,[39,10],null,[["@table"],[[30,1]]],null],[1,"\\n"]],[1]],null],[1,"        "],[13],[1,"\\n      "]],[]]]]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"]],[]]]],["table"],false,["if","d-button","div","input","on","action","conditional-loading-spinner","ul","each","-track-array","explorer-schema/one-table"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema.hbs",isStrictMode:!1})
class u extends r.default{static#e=(()=>dt7948.g(this.prototype,"filter",[s.tracked]))()
#r=(()=>{dt7948.i(this,"filter")})()
static#t=(()=>dt7948.g(this.prototype,"loading",[s.tracked]))()
#s=(()=>{dt7948.i(this,"loading")})()
static#o=(()=>dt7948.g(this.prototype,"hideSchema",[s.tracked],(function(){return this.args.hideSchema})))()
#i=(()=>{dt7948.i(this,"hideSchema")})()
get transformedSchema(){const e=this.args.schema
for(const t in e)e.hasOwnProperty(t)&&e[t].forEach((e=>{const t=[]
e.primary&&t.push("primary key"),e.is_nullable&&t.push("null"),e.column_default&&t.push("default "+e.column_default),e.fkey_info&&t.push("fkey "+e.fkey_info),e.denormal&&t.push("denormal "+e.denormal)
const r=t.join(", ")
r&&(e.notes=r),(e.enum||e.column_desc)&&(e.havepopup=!0),e.havetypeinfo=!!(e.notes||e.enum||e.column_desc)}))
return e}get filteredTables(){let e=[],t=this.filter
try{(0,i.isBlank)(this.filter)||(t=new RegExp(this.filter))}catch{t=null}const r=!!t
for(const s in this.transformedSchema)if(this.transformedSchema.hasOwnProperty(s))if(r)if(t.source===s||t.source+"s"===s)e.unshift({name:s,columns:this.transformedSchema[s],open:r})
else if(t.test(s))e.push({name:s,columns:this.transformedSchema[s],open:r})
else{let o=[]
this.transformedSchema[s].forEach((e=>{t.source===e.column_name?o.unshift(e):t.test(e.column_name)&&o.push(e)})),(0,i.isEmpty)(o)||e.push({name:s,columns:o,open:r})}else e.push({name:s,columns:this.transformedSchema[s],open:!1})
return e}updateFilter(e){this.filter=e.toLowerCase(),this.loading=!1}static#n=(()=>dt7948.n(this.prototype,"updateFilter",[(0,n.debounce)(500)]))()
filterChanged(e){this.loading=!0,this.updateFilter(e)}static#a=(()=>dt7948.n(this.prototype,"filterChanged",[o.action]))()
collapseSchema(){this.hideSchema=!0,this.args.updateHideSchema(!0)}static#l=(()=>dt7948.n(this.prototype,"collapseSchema",[o.action]))()
expandSchema(){this.hideSchema=!1,this.args.updateHideSchema(!1)}static#u=(()=>dt7948.n(this.prototype,"expandSchema",[o.action]))()}e.default=u,(0,t.setComponentTemplate)(l,u)})),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema/enum-info",["exports","@ember/component","@glimmer/component","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"OSNqp6n+",block:'[[[10,"ol"],[12],[1,"\\n"],[42,[28,[37,2],[[28,[37,2],[[30,0,["enuminfo"]]],null]],null],null,[[[1,"    "],[10,"li"],[15,2,[30,1,["value"]]],[12],[1,"\\n      "],[1,[30,1,["name"]]],[1,"\\n    "],[13],[1,"\\n"]],[1]],null],[13]],["enum"],false,["ol","each","-track-array","li"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema/enum-info.hbs",isStrictMode:!1})
class i extends r.default{get enuminfo(){return Object.entries(this.args.col.enum).map((e=>{let[t,r]=e
return{value:t,name:r}}))}}e.default=i,(0,t.setComponentTemplate)(o,i)})),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema/one-table",["exports","@ember/component","@glimmer/component","@glimmer/tracking","discourse/lib/decorators","@ember/template-factory"],(function(e,t,r,s,o,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const n=(0,i.createTemplateFactory)({id:"sr7w9zTx",block:'[[[10,"li"],[15,0,[29,["schema-table ",[30,0,["styles"]]]]],[12],[1,"\\n"],[1,"  "],[11,0],[24,0,"schema-table-name"],[24,"role","button"],[4,[38,2],["click",[30,0,["toggleOpen"]]],null],[12],[1,"\\n"],[41,[30,0,["open"]],[[[1,"      "],[1,[28,[35,4],["caret-down"],null]],[1,"\\n"]],[]],[[[1,"      "],[1,[28,[35,4],["caret-right"],null]],[1,"\\n"]],[]]],[1,"    "],[1,[30,1,["name"]]],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,0],[14,0,"schema-table-cols"],[12],[1,"\\n"],[41,[30,0,["open"]],[[[1,"      "],[10,"dl"],[12],[1,"\\n"],[42,[28,[37,7],[[28,[37,7],[[30,1,["columns"]]],null]],null],null,[[[1,"          "],[10,0],[12],[1,"\\n            "],[10,"dt"],[15,0,[52,[30,2,["sensitive"]],"sensitive"]],[15,"title",[52,[30,2,["sensitive"]],[28,[37,9],["explorer.schema.sensitive"],null]]],[12],[1,"\\n"],[41,[30,2,["sensitive"]],[[[1,"                "],[1,[28,[35,4],["triangle-exclamation"],null]],[1,"\\n"]],[]],null],[1,"              "],[1,[30,2,["column_name"]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"dd"],[12],[1,"\\n              "],[1,[30,2,["data_type"]]],[1,"\\n"],[41,[30,2,["havetypeinfo"]],[[[1,"                "],[10,"br"],[12],[13],[1,"\\n"],[41,[30,2,["havepopup"]],[[[1,"                  "],[10,0],[14,0,"popup-info"],[12],[1,"\\n                    "],[1,[28,[35,4],["info"],null]],[1,"\\n                    "],[10,0],[14,0,"popup"],[12],[1,"\\n                      "],[1,[30,2,["column_desc"]]],[1,"\\n"],[41,[30,2,["enum"]],[[[1,"                        "],[8,[39,12],null,[["@col"],[[30,2]]],null],[1,"\\n"]],[]],null],[1,"                    "],[13],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[1,"                "],[10,1],[14,0,"schema-typenotes"],[12],[1,"\\n                  "],[1,[30,2,["notes"]]],[1,"\\n                "],[13],[1,"\\n"]],[]],null],[1,"            "],[13],[1,"\\n          "],[13],[1,"\\n"]],[2]],null],[1,"      "],[13],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n"],[13]],["@table","col"],false,["li","div","on","if","d-icon","dl","each","-track-array","dt","i18n","dd","br","explorer-schema/enum-info","span"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema/one-table.hbs",isStrictMode:!1})
class a extends r.default{static#e=(()=>dt7948.g(this.prototype,"open",[s.tracked],(function(){return this.args.table.open})))()
#d=(()=>{dt7948.i(this,"open")})()
get styles(){return this.open?"open":""}toggleOpen(){this.open=!this.open}static#t=(()=>dt7948.n(this.prototype,"toggleOpen",[o.bind]))()}e.default=a,(0,t.setComponentTemplate)(n,a)})),define("discourse/plugins/discourse-data-explorer/discourse/components/modal/query-help",["exports","@ember/template","discourse/components/d-modal","discourse-i18n","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,r,s,o,i,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const a=(0,o.setComponentTemplate)((0,i.createTemplateFactory)({id:"DG9/T/vs",block:'[[[1,"\\n  "],[8,[32,0],null,[["@title","@closeModal"],[[28,[32,1],["explorer.help.modal_title"],null],[30,1]]],[["body"],[[[[1,"\\n      "],[1,[28,[32,2],[[28,[32,1],["explorer.help.auto_resolution"],null]],null]],[1,"\\n      "],[1,[28,[32,2],[[28,[32,1],["explorer.help.custom_params"],null]],null]],[1,"\\n      "],[1,[28,[32,2],[[28,[32,1],["explorer.help.default_values"],null]],null]],[1,"\\n      "],[1,[28,[32,2],[[28,[32,1],["explorer.help.data_types"],null]],null]],[1,"\\n    "]],[]]]]],[1,"\\n"]],["@closeModal"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/modal/query-help.js",scope:()=>[r.default,s.i18n,t.htmlSafe],isStrictMode:!0}),(0,n.default)(void 0,"query-help:QueryHelp"))
e.default=a})),define("discourse/plugins/discourse-data-explorer/discourse/components/param-input-form",["exports","@glimmer/component","@ember/object","@ember/service","@ember/string","@ember/utils","discourse/components/conditional-loading-spinner","discourse/components/form","discourse/models/category","discourse-i18n","discourse/plugins/discourse-data-explorer/discourse/components/param-input/boolean-three","discourse/plugins/discourse-data-explorer/discourse/components/param-input/category-id-input","discourse/plugins/discourse-data-explorer/discourse/components/param-input/group-input","discourse/plugins/discourse-data-explorer/discourse/components/param-input/user-id-input","discourse/plugins/discourse-data-explorer/discourse/components/param-input/user-list-input","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,r,s,o,i,n,a,l,u,d,c,p,m,h,g,f,y){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ParamValidationError=e.ERRORS=void 0
class b extends Error{}e.ParamValidationError=b
const _={int:"int",bigint:"string",boolean:"boolean",string:"string",time:"time",date:"date",datetime:"datetime",double:"string",user_id:"user_id",post_id:"string",topic_id:"generic",category_id:"category_id",group_id:"group_list",badge_id:"generic",int_list:"generic",string_list:"generic",user_list:"user_list",group_list:"group_list"},x=e.ERRORS={REQUIRED:(0,u.i18n)("form_kit.errors.required"),NOT_AN_INTEGER:(0,u.i18n)("form_kit.errors.not_an_integer"),NOT_A_NUMBER:(0,u.i18n)("form_kit.errors.not_a_number"),OVERFLOW_HIGH:(0,u.i18n)("form_kit.errors.too_high",{count:2147484647}),OVERFLOW_LOW:(0,u.i18n)("form_kit.errors.too_low",{count:-2147484648}),INVALID:(0,u.i18n)("explorer.form.errors.invalid"),NO_SUCH_CATEGORY:(0,u.i18n)("explorer.form.errors.no_such_category"),NO_SUCH_GROUP:(0,u.i18n)("explorer.form.errors.no_such_group"),INVALID_DATE:e=>(0,u.i18n)("explorer.form.errors.invalid_date",{date:e}),INVALID_TIME:e=>(0,u.i18n)("explorer.form.errors.invalid_time",{time:e})}
function v(e,t){switch(e){case"string":case"int":return null!=t?String(t):""
case"boolean":return String(t)
case"group_list":case"user_list":return t?.join(",")
case"group_id":return t[0]
case"datetime":return t?.replaceAll("T"," ")
default:return t?.toString()}}function w(e){switch(_[e.type]){case"boolean":return e.nullable?"required":""
case"string":case"string_list":case"generic":return e.nullable?"":"required:trim"
default:return e.nullable?"":"required"}}const k={int:(0,g.setComponentTemplate)((0,f.createTemplateFactory)({id:"Ui8byv2k",block:'[[[1,"\\n    "],[8,[30,1,["Input"]],[[16,3,[30,2,["identifier"]]]],[["@type"],["number"]],null],[1,"\\n  "]],["@field","@info"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/param-input-form.js",isStrictMode:!0}),(0,y.default)(void 0,void 0)),boolean:(0,g.setComponentTemplate)((0,f.createTemplateFactory)({id:"EZWX6cT0",block:'[[[8,[30,1,["Checkbox"]],[[16,3,[30,2,["identifier"]]]],null,null]],["@field","@info"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/param-input-form.js",isStrictMode:!0}),(0,y.default)(void 0,void 0)),boolean_three:d.default,category_id:c.default,user_id:m.default,user_list:h.default,group_list:p.default,date:(0,g.setComponentTemplate)((0,f.createTemplateFactory)({id:"OzZxZsFL",block:'[[[1,"\\n    "],[8,[30,1,["Input"]],[[16,3,[30,2,["identifier"]]]],[["@type"],["date"]],null],[1,"\\n  "]],["@field","@info"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/param-input-form.js",isStrictMode:!0}),(0,y.default)(void 0,void 0)),time:(0,g.setComponentTemplate)((0,f.createTemplateFactory)({id:"fJpbDe7u",block:'[[[1,"\\n    "],[8,[30,1,["Input"]],[[16,3,[30,2,["identifier"]]]],[["@type"],["time"]],null],[1,"\\n  "]],["@field","@info"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/param-input-form.js",isStrictMode:!0}),(0,y.default)(void 0,void 0)),datetime:(0,g.setComponentTemplate)((0,f.createTemplateFactory)({id:"LSXrF4Ey",block:'[[[1,"\\n    "],[8,[30,1,["Input"]],[[16,3,[30,2,["identifier"]]]],[["@type"],["datetime-local"]],null],[1,"\\n  "]],["@field","@info"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/param-input-form.js",isStrictMode:!0}),(0,y.default)(void 0,void 0)),default:(0,g.setComponentTemplate)((0,f.createTemplateFactory)({id:"RWJET0M1",block:'[[[8,[30,1,["Input"]],[[16,3,[30,2,["identifier"]]]],null,null]],["@field","@info"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/param-input-form.js",isStrictMode:!0}),(0,y.default)(void 0,void 0))}
function T(e){let t=_[e.type]||"generic"
return e.nullable&&"boolean"===t&&(t="boolean_three"),k[t]||k.default}class S extends t.default{static#e=(()=>dt7948.g(this.prototype,"site",[s.service]))()
#c=(()=>{dt7948.i(this,"site")})()
data={}
paramInfo=[]
infoOf={}
form=null
promiseNormalizations=[]
formLoaded=(()=>new Promise((e=>{this.__form_load_callback=e})))()
constructor(){super(...arguments),this.initializeParams(),this.args.onRegisterApi?.({submit:this.submit,allNormalized:Promise.allSettled(this.promiseNormalizations)})}initializeParams(){this.args.paramInfo.forEach((e=>{const t=e.identifier,r=this.createParamInfo(e)
this.paramInfo.push(r),this.infoOf[t]=e
const s=this.getNormalizedValue(e)
s instanceof Promise?this.handlePromiseNormalization(s,r):this.data[t]=s}))}createParamInfo(e){return r.default.create({...e,validation:w(e),validate:this.validatorOf(e),component:T(e)})}async addError(e,t){await this.formLoaded,this.form.addError(e,{title:e,message:t})}static#t=(()=>dt7948.n(this.prototype,"addError",[r.action]))()
normalizeValue(e,t){switch(e.type){case"category_id":return function(e){return e=String(e||""),!/^\d+$/.test(e)&&e.trim()?l.default.asyncFindBySlugPath((0,o.dasherize)(e)).then((e=>e.id)).catch((t=>{throw 404===t.jqXHR?.status?new b(`${x.NO_SUCH_CATEGORY}: ${e}`):new Error(t.errorThrow||t.message)})):e}(t)
case"boolean":return null==t||"#null"===t?!!e.nullable&&"#null":"true"===t
case"group_id":case"group_list":const r=this.normalizeGroups(t)
return r.errorMsg&&this.addError(e.identifier,r.errorMsg),"group_id"===e.type?r.value.slice(0,1):r.value
case"user_list":return Array.isArray(t)?t||null:t?.split(",")||null
case"user_id":return Array.isArray(t)?t[0]:t
case"date":try{return t?moment(t).format("YYYY-MM-DD"):null}catch{return this.addError(e.identifier,x.INVALID_DATE(String(t))),null}case"time":try{return t?moment(new Date(`1970/01/01 ${t}`).toISOString()).format("HH:mm"):null}catch{return this.addError(e.identifier,x.INVALID_TIME(String(t))),null}case"datetime":try{return t?moment(new Date(t).toISOString()).format("YYYY-MM-DD HH:mm"):null}catch{return this.addError(e.identifier,x.INVALID_TIME(String(t))),null}default:return t}}static#o=(()=>dt7948.n(this.prototype,"normalizeValue",[r.action]))()
getNormalizedValue(e){const t=this.args.initialValues,r=e.identifier
return this.normalizeValue(e,t&&r in t?t[r]:e.default)}handlePromiseNormalization(e,t){this.promiseNormalizations.push(e),t.set("loading",!0),this.data[t.identifier]=null,e.then((e=>this.form.set(t.identifier,e))).catch((e=>this.addError(t.identifier,e.message))).finally((()=>t.set("loading",!1)))}normalizeGroups(e){e||=[],"string"==typeof e&&(e=e.split(","))
const t=new Set(this.site.get("groups").map((e=>e.name))),r=Object.fromEntries(this.site.get("groups").map((e=>[e.id,e.name]))),s=[],o=[]
for(const i of e)t.has(i)?s.push(i):r[Number(i)]?s.push(r[Number(i)]):o.push(String(i))
return{value:s,errorMsg:0!==o.length?`${x.NO_SUCH_GROUP}: ${o.join(", ")}`:null}}static#n=(()=>dt7948.n(this.prototype,"normalizeGroups",[r.action]))()
getErrorFn(e){const t=e=>/^\d+$/.test(e)
return{int:e=>e>=2147483648?x.OVERFLOW_HIGH:e<=-2147483649?x.OVERFLOW_LOW:null,bigint:e=>isNaN(parseInt(e,10))?x.NOT_A_NUMBER:/^-?\d+$/.test(e)?null:x.NOT_AN_INTEGER,boolean:e=>/^Y|N|#null|true|false/.test(String(e))?null:x.INVALID,double:e=>isNaN(parseFloat(e))?/^(-?)Inf(inity)?$/i.test(e)||/^(-?)NaN$/i.test(e)?null:x.NOT_A_NUMBER:null,int_list:e=>e.split(",").every((e=>/^(-?\d+|null)$/.test(e.trim())))?null:x.INVALID,post_id:e=>t(e)||/\d+\/\d+(\?u=.*)?$/.test(e)||/\/t\/[^/]+\/(\d+)(\?u=.*)?/.test(e)?null:x.INVALID,topic_id:e=>t(e)||/\/t\/[^/]+\/(\d+)/.test(e)?null:x.INVALID,category_id:e=>this.site.categoriesById.get(Number(e))?null:x.NO_SUCH_CATEGORY,group_list:e=>this.normalizeGroups(e).errorMsg,group_id:e=>this.normalizeGroups(e).errorMsg}[e.type]??(()=>null)}validatorOf(e){const t=this.getErrorFn(e)
return(r,s,o)=>{let{addError:n}=o
if((0,i.isEmpty)(s)||null==s)return
const a=t(s)
null!=a&&n(r,{title:e.identifier,message:a})}}async submit(){if(null==this.form)throw"No form"
if(this.serializedData=null,await this.form.submit(),null==this.serializedData)throw new b("validation_failed")
return this.serializedData}static#a=(()=>dt7948.n(this.prototype,"submit",[r.action]))()
onRegisterApi(e){this.__form_load_callback(),this.form=e}static#l=(()=>dt7948.n(this.prototype,"onRegisterApi",[r.action]))()
onSubmit(e){const t={}
for(const[r,s]of Object.entries(e))t[r]=v(this.infoOf[r].type,s)??void 0
this.serializedData=t}static#u=(()=>dt7948.n(this.prototype,"onSubmit",[r.action]))()
static#p=(()=>(0,g.setComponentTemplate)((0,f.createTemplateFactory)({id:"K6kFJTOW",block:'[[[1,"\\n    "],[10,0],[14,0,"query-params"],[12],[1,"\\n      "],[8,[32,0],[[24,0,"params-form"]],[["@data","@onRegisterApi","@onSubmit"],[[30,0,["data"]],[30,0,["onRegisterApi"]],[30,0,["onSubmit"]]]],[["default"],[[[[1,"\\n"],[42,[28,[31,1],[[28,[31,1],[[30,0,["paramInfo"]]],null]],null],null,[[[1,"          "],[10,0],[14,0,"param"],[12],[1,"\\n            "],[8,[30,1,["Field"]],null,[["@name","@title","@validation","@validate"],[[30,2,["identifier"]],[30,2,["identifier"]],[30,2,["validation"]],[30,2,["validate"]]]],[["default"],[[[[1,"\\n              "],[8,[30,2,["component"]],null,[["@field","@info"],[[30,3],[30,2]]],null],[1,"\\n              "],[8,[32,1],null,[["@condition","@size"],[[30,2,["loading"]],"small"]],null],[1,"\\n            "]],[3]]]]],[1,"\\n          "],[13],[1,"\\n"]],[2]],null],[1,"      "]],[1]]]]],[1,"\\n    "],[13],[1,"\\n  "]],["form","info","field"],false,["each","-track-array"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/param-input-form.js",scope:()=>[a.default,n.default],isStrictMode:!0}),this))()}e.default=S})),define("discourse/plugins/discourse-data-explorer/discourse/components/param-input/boolean-three",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"Vk0kOv7R",block:'[[[8,[30,1,["Select"]],[[16,3,[30,2,["identifier"]]]],null,[["default"],[[[[1,"\\n  "],[8,[30,3,["Option"]],null,[["@value"],["Y"]],[["default"],[[[[1,"\\n    "],[1,[28,[35,0],["explorer.types.bool.true"],null]],[1,"\\n  "]],[]]]]],[1,"\\n  "],[8,[30,3,["Option"]],null,[["@value"],["N"]],[["default"],[[[[1,"\\n    "],[1,[28,[35,0],["explorer.types.bool.false"],null]],[1,"\\n  "]],[]]]]],[1,"\\n  "],[8,[30,3,["Option"]],null,[["@value"],["#null"]],[["default"],[[[[1,"\\n    "],[1,[28,[35,0],["explorer.types.bool.null_"],null]],[1,"\\n  "]],[]]]]],[1,"\\n"]],[3]]]]]],["@field","@info","select"],false,["i18n"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/param-input/boolean-three.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"boolean-three"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/param-input/category-id-input",["exports","@glimmer/component","select-kit/components/category-chooser","@ember/component","@ember/template-factory"],(function(e,t,r,s,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class i extends t.default{get data(){return{value:this.args.field.value}}static#e=(()=>(0,s.setComponentTemplate)((0,o.createTemplateFactory)({id:"to0bAuNu",block:'[[[1,"\\n    "],[8,[30,1,["Custom"]],[[16,1,[30,1,["id"]]]],null,[["default"],[[[[1,"\\n      "],[8,[32,0],[[16,3,[30,2,["identifier"]]]],[["@value","@onChange"],[[30,0,["data","value"]],[30,1,["set"]]]],null],[1,"\\n    "]],[]]]]],[1,"\\n  "]],["@field","@info"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/param-input/category-id-input.js",scope:()=>[r.default],isStrictMode:!0}),this))()}e.default=i})),define("discourse/plugins/discourse-data-explorer/discourse/components/param-input/group-input",["exports","@glimmer/component","@ember/service","select-kit/components/group-chooser","@ember/component","@ember/template-factory"],(function(e,t,r,s,o,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class n extends t.default{static#e=(()=>dt7948.g(this.prototype,"site",[r.service]))()
#c=(()=>{dt7948.i(this,"site")})()
get allGroups(){return this.site.get("groups")}get groupChooserOption(){return"group_id"===this.args.info.type?{maximum:1}:{}}static#t=(()=>(0,o.setComponentTemplate)((0,i.createTemplateFactory)({id:"+pze88n5",block:'[[[1,"\\n    "],[8,[30,1,["Custom"]],[[16,1,[30,1,["id"]]]],null,[["default"],[[[[1,"\\n      "],[8,[32,0],[[16,3,[30,2,["identifier"]]]],[["@content","@value","@labelProperty","@valueProperty","@onChange","@options"],[[30,0,["allGroups"]],[30,1,["value"]],"name","name",[30,1,["set"]],[30,0,["groupChooserOption"]]]],null],[1,"\\n    "]],[]]]]],[1,"\\n  "]],["@field","@info"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/param-input/group-input.js",scope:()=>[s.default],isStrictMode:!0}),this))()}e.default=n})),define("discourse/plugins/discourse-data-explorer/discourse/components/param-input/user-id-input",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"lhcSu5+W",block:'[[[8,[30,1,["Custom"]],[[16,1,[30,1,["id"]]]],null,[["default"],[[[[1,"\\n  "],[8,[39,0],[[16,3,[30,2,["identifier"]]]],[["@value","@options","@onChange"],[[30,1,["value"]],[28,[37,1],null,[["maximum"],[1]]],[30,1,["set"]]]],null],[1,"\\n"]],[]]]]]],["@field","@info"],false,["email-group-user-chooser","hash"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/param-input/user-id-input.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"user-id-input"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/param-input/user-list-input",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"cMxZBKi+",block:'[[[8,[30,1,["Custom"]],[[16,1,[30,1,["id"]]]],null,[["default"],[[[[1,"\\n  "],[8,[39,0],[[16,3,[30,2,["identifier"]]]],[["@value","@onChange"],[[30,1,["value"]],[30,1,["set"]]]],null],[1,"\\n"]],[]]]]]],["@field","@info"],false,["email-group-user-chooser"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/param-input/user-list-input.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"user-list-input"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/query-result",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","@ember/runloop","@ember/service","@ember/string","discourse/lib/ajax","discourse/lib/get-url","discourse/models/badge","discourse/models/category","discourse-i18n","discourse/plugins/discourse-data-explorer/discourse/components/result-types/badge","discourse/plugins/discourse-data-explorer/discourse/components/result-types/category","discourse/plugins/discourse-data-explorer/discourse/components/result-types/group","discourse/plugins/discourse-data-explorer/discourse/components/result-types/html","discourse/plugins/discourse-data-explorer/discourse/components/result-types/json","discourse/plugins/discourse-data-explorer/discourse/components/result-types/post","discourse/plugins/discourse-data-explorer/discourse/components/result-types/reltime","discourse/plugins/discourse-data-explorer/discourse/components/result-types/text","discourse/plugins/discourse-data-explorer/discourse/components/result-types/topic","discourse/plugins/discourse-data-explorer/discourse/components/result-types/url","discourse/plugins/discourse-data-explorer/discourse/components/result-types/user","@ember/template-factory"],(function(e,t,r,s,o,i,n,a,l,u,d,c,p,m,h,g,f,y,b,_,x,v,w,k,T){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const S=(0,T.createTemplateFactory)({id:"meifyjJn",block:'[[[10,"article"],[12],[1,"\\n  "],[10,"header"],[14,0,"result-header"],[12],[1,"\\n    "],[10,0],[14,0,"result-info"],[12],[1,"\\n      "],[8,[39,3],null,[["@action","@icon","@label"],[[30,0,["downloadResultJson"]],"download","explorer.download_json"]],null],[1,"\\n\\n      "],[8,[39,3],null,[["@action","@icon","@label"],[[30,0,["downloadResultCsv"]],"download","explorer.download_csv"]],null],[1,"\\n\\n"],[41,[30,0,["canShowChart"]],[[[41,[30,0,["chartDisplayed"]],[[[1,"          "],[8,[39,3],null,[["@action","@icon","@label"],[[30,0,["hideChart"]],"table","explorer.show_table"]],null],[1,"\\n"]],[]],[[[1,"          "],[8,[39,3],null,[["@action","@icon","@label"],[[30,0,["showChart"]],"chart-bar","explorer.show_graph"]],null],[1,"\\n"]],[]]]],[]],null],[1,"    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"result-about"],[12],[1,"\\n      "],[1,[30,0,["resultCount"]]],[1,"\\n      "],[1,[30,0,["duration"]]],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,"br"],[12],[13],[41,[30,0,["explainText"]],[[[1,"      "],[10,"pre"],[14,0,"result-explain"],[12],[1,"        "],[10,"code"],[12],[1,[30,0,["explainText"]]],[1,"\\n        "],[13],[1,"\\n      "],[13]],[]],null],[1,"\\n    "],[10,"br"],[12],[13],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,"section"],[12],[1,"\\n"],[41,[30,0,["chartDisplayed"]],[[[1,"      "],[8,[39,9],null,[["@labels","@values","@datasetName"],[[30,0,["chartLabels"]],[30,0,["chartValues"]],[30,0,["chartDatasetName"]]]],null],[1,"\\n"]],[]],[[[1,"      "],[10,"table"],[12],[1,"\\n        "],[10,"thead"],[12],[1,"\\n          "],[10,"tr"],[14,0,"headers"],[12],[1,"\\n"],[42,[28,[37,14],[[28,[37,14],[[30,0,["columnNames"]]],null]],null],null,[[[1,"              "],[10,"th"],[12],[1,[30,1]],[13],[1,"\\n"]],[1]],null],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n        "],[10,"tbody"],[12],[1,"\\n"],[42,[28,[37,14],[[28,[37,14],[[30,0,["rows"]]],null]],null],null,[[[1,"            "],[8,[39,17],null,[["@row","@columnComponents","@lookupUser","@lookupBadge","@lookupPost","@lookupTopic","@lookupGroup","@lookupCategory","@transformedPostTable","@transformedBadgeTable","@transformedUserTable","@transformedGroupTable","@transformedTopicTable","@site"],[[30,2],[30,0,["columnComponents"]],[30,0,["lookupUser"]],[30,0,["lookupBadge"]],[30,0,["lookupPost"]],[30,0,["lookupTopic"]],[30,0,["lookupGroup"]],[30,0,["lookupCategory"]],[30,0,["transformedPostTable"]],[30,0,["transformedBadgeTable"]],[30,0,["transformedUserTable"]],[30,0,["transformedGroupTable"]],[30,0,["transformedTopicTable"]],[30,0,["site"]]]],null],[1,"\\n"]],[2]],null],[1,"        "],[13],[1,"\\n      "],[13],[1,"\\n"]],[]]],[1,"  "],[13],[1,"\\n"],[13]],["col","row"],false,["article","header","div","d-button","if","br","pre","code","section","data-explorer-bar-chart","table","thead","tr","each","-track-array","th","tbody","query-row-content"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/query-result.hbs",isStrictMode:!1}),q={topic:v.default,text:x.default,post:b.default,reltime:_.default,badge:m.default,url:w.default,user:k.default,group:g.default,html:f.default,json:y.default,category:h.default}
class C extends r.default{static#e=(()=>dt7948.g(this.prototype,"site",[n.service]))()
#c=(()=>{dt7948.i(this,"site")})()
static#t=(()=>dt7948.g(this.prototype,"chartDisplayed",[s.tracked],(function(){return!1})))()
#m=(()=>{dt7948.i(this,"chartDisplayed")})()
get colRender(){return this.args.content.colrender||{}}get rows(){return this.args.content.rows}get columns(){return this.args.content.columns}get params(){return this.args.content.params}get explainText(){return this.args.content.explain}get chartDatasetName(){return this.columnNames[1]}get columnNames(){return this.columns?this.columns.map((e=>{if(e.endsWith("_id"))return e.slice(0,-3)
const t=e.indexOf("$")
return t>=0?e.substring(t+1):e})):[]}get columnComponents(){return this.columns?this.columns.map(((e,t)=>{let r="text"
return this.colRender[t]&&(r=this.colRender[t]),{name:r,component:q[r]}})):[]}get chartValues(){return this.rows.mapBy(1)}get colCount(){return this.columns.length}get resultCount(){const e=this.args.content.result_count
return e===this.args.content.default_limit?(0,p.i18n)("explorer.max_result_count",{count:e}):(0,p.i18n)("explorer.result_count",{count:e})}get duration(){return(0,p.i18n)("explorer.run_time",{value:p.default.toNumber(this.args.content.duration,{precision:1})})}get parameterAry(){let e=[]
for(let t in this.params)this.params.hasOwnProperty(t)&&e.push({key:t,value:this.params[t]})
return e}get transformedUserTable(){return N(this.args.content.relations.user)}get transformedBadgeTable(){return N(this.args.content.relations.badge,d.default)}get transformedPostTable(){return N(this.args.content.relations.post)}get transformedTopicTable(){return N(this.args.content.relations.topic)}get transformedGroupTable(){return N(this.site.groups)}get canShowChart(){const e=2===this.colCount,t=this.resultCount[0]>0&&"number"==typeof this.rows[0][1],r=this.colRender[1]
return e&&t&&!r}get chartLabels(){const e={user:e=>e.username,badge:e=>e.name,topic:e=>e.title,group:e=>e.name,category:e=>e.name},t=this.colRender[0]
if(t){const r=this[`lookup${(0,a.capitalize)(t)}`],s=e[t]
if(r&&s)return this.rows.map((e=>{const t=r.call(this,e[0]),o=s(t)
return this._cutChartLabel(o)}))}return this.rows.map((e=>this._cutChartLabel(e[0])))}lookupUser(e){return this.transformedUserTable[e]}lookupBadge(e){return this.transformedBadgeTable[e]}lookupPost(e){return this.transformedPostTable[e]}lookupTopic(e){return this.transformedTopicTable[e]}lookupGroup(e){return this.transformedGroupTable[e]}lookupCategory(e){return c.default.findById(e)}_cutChartLabel(e){const t=e.toString()
return t.length>25?`${t.substring(0,25)}...`:t}downloadResultJson(){this._downloadResult("json")}static#o=(()=>dt7948.n(this.prototype,"downloadResultJson",[o.action]))()
downloadResultCsv(){this._downloadResult("csv")}static#n=(()=>dt7948.n(this.prototype,"downloadResultCsv",[o.action]))()
showChart(){this.chartDisplayed=!0}static#a=(()=>dt7948.n(this.prototype,"showChart",[o.action]))()
hideChart(){this.chartDisplayed=!1}static#l=(()=>dt7948.n(this.prototype,"hideChart",[o.action]))()
_download_url(){return this.args.group?`/g/${this.args.group.name}/reports/`:"/admin/plugins/explorer/queries/"}_downloadResult(e){let t="xxxxxxxx".replace(/[xy]/g,(()=>(16*Math.random()|0).toString(16)))
window.open("data:text/html;base64,"+btoa("<style>body{font-size:36px;display:flex;justify-content:center;align-items:center;}</style><body>Click anywhere to close this window once the download finishes.<script>window.onclick=function(){window.close()};<\/script>"),t)
let r=document.createElement("form")
function s(e,t){let s
s=document.createElement("input"),s.setAttribute("name",e),s.setAttribute("value",t),r.appendChild(s)}r.setAttribute("id","query-download-result"),r.setAttribute("method","post"),r.setAttribute("action",(0,u.default)(this._download_url()+this.args.query.id+"/run."+e+"?download=1")),r.setAttribute("target",t),r.setAttribute("style","display:none;"),s("params",JSON.stringify(this.params)),s("explain",this.explainText),s("limit","1000000"),(0,l.ajax)("/session/csrf.json").then((e=>{s("authenticity_token",e.csrf),document.body.appendChild(r),r.submit(),(0,i.schedule)("afterRender",(()=>document.body.removeChild(r)))}))}}function N(e,t){const r={}
return e?.forEach((e=>{r[e.id]=t?t.create(e):e})),r}e.default=C,(0,t.setComponentTemplate)(S,C)})),define("discourse/plugins/discourse-data-explorer/discourse/components/query-results-wrapper",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"KH/8vEG1",block:'[[[41,[30,1],[[[1,"  "],[10,0],[14,0,"query-results"],[12],[1,"\\n"],[41,[30,2],[[[1,"      "],[8,[39,2],null,[["@query","@content"],[[30,3],[30,1]]],null],[1,"\\n"]],[]],[[[42,[28,[37,4],[[28,[37,4],[[30,1,["errors"]]],null]],null],null,[[[1,"        "],[10,"pre"],[14,0,"query-error"],[12],[10,"code"],[12],[1,[30,4]],[13],[13],[1,"\\n"]],[4]],null]],[]]],[1,"  "],[13],[1,"\\n"]],[]],null]],["@results","@showResults","@query","err"],false,["if","div","query-result","each","-track-array","pre","code"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/query-results-wrapper.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"query-results-wrapper"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/query-row-content",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/string","discourse/lib/get-url","discourse/lib/utilities","discourse/plugins/discourse-data-explorer/discourse/components/result-types/text","@ember/template-factory"],(function(e,t,r,s,o,i,n,a,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const u=(0,l.createTemplateFactory)({id:"Rlie1S6r",block:'[[[10,"tr"],[12],[1,"\\n"],[42,[28,[37,2],[[28,[37,2],[[30,0,["results"]]],null]],null],null,[[[1,"    "],[10,"td"],[12],[1,"\\n      "],[8,[30,1,["component"]],null,[["@ctx","@params","@textValue"],[[30,1,["ctx"]],[30,1,["params"]],[30,1,["textValue"]]]],null],[1,"\\n    "],[13],[1,"\\n"]],[1]],null],[13]],["result"],false,["tr","each","-track-array","td"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/query-row-content.hbs",isStrictMode:!1})
class d extends r.default{get results(){return this.args.columnComponents.map(((e,t)=>{const r=this.args.row[t],s=parseInt(r,10),l={value:r,id:s,baseuri:(0,i.default)("")}
if(null===this.args.row[t])return{component:a.default,textValue:"NULL"}
if("text"===e.name)return{component:a.default,textValue:(0,n.escapeExpression)(this.args.row[t].toString())}
const u=this.args[`lookup${(0,o.capitalize)(e.name)}`]
if(u&&(l[e.name]=u.call(this.args,s)),"url"===e.name){let[e,t]=function(e){let[t,r]=[e,e]
const s=e.split(/,(.+)/)
s.length>1&&(r=s[0],t=s[1])
return[t,r]}(r)
l.href=e,l.target=t}try{return{component:e.component||a.default,ctx:l}}catch{return"error"}}))}static#e=(()=>dt7948.n(this.prototype,"results",[s.cached]))()}e.default=d,(0,t.setComponentTemplate)(u,d)})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/badge",["exports","@ember/component","@glimmer/component","@ember/template","@ember/utils","discourse/lib/icon-library","@ember/template-factory"],(function(e,t,r,s,o,i,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const a=(0,n.createTemplateFactory)({id:"dHVEUMu4",block:'[[[10,3],[15,6,[29,[[30,1,["baseuri"]],"/badges/",[30,1,["badge","id"]],"/",[30,1,["badge","name"]]]]],[15,0,[29,["user-badge ",[30,1,["badge","badgeTypeClassName"]]]]],[15,"title",[30,1,["badge","display_name"]]],[15,"data-badge-name",[30,1,["badge","name"]]],[12],[1,"\\n  "],[1,[30,0,["iconOrImageReplacement"]]],[1,"\\n  "],[10,1],[14,0,"badge-display-name"],[12],[1,[30,1,["badge","display_name"]]],[13],[1,"\\n"],[13]],["@ctx"],false,["a","span"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/badge.hbs",isStrictMode:!1})
class l extends r.default{get iconOrImageReplacement(){if((0,o.isEmpty)(this.args.ctx.badge.icon))return""
if(this.args.ctx.badge.icon.indexOf("fa-")>-1){const e=(0,i.iconHTML)((0,i.convertIconClass)(this.args.ctx.badge.icon))
return(0,s.htmlSafe)(e)}return(0,s.htmlSafe)("<img src='"+this.args.ctx.badge.icon+"'>")}}e.default=l,(0,t.setComponentTemplate)(a,l)})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/category",["exports","@ember/component","@glimmer/component","discourse/helpers/category-link","@ember/template-factory"],(function(e,t,r,s,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"ymkquNEo",block:'[[[41,[30,1,["category"]],[[[1,"  "],[1,[30,0,["categoryBadgeReplacement"]]],[1,"\\n"]],[]],[[[1,"  "],[10,3],[15,6,[29,[[30,1,["baseuri"]],"/t/",[30,1,["id"]]]]],[12],[1,[30,1,["id"]]],[13],[1,"\\n"]],[]]]],["@ctx"],false,["if","a"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/category.hbs",isStrictMode:!1})
class n extends r.default{get categoryBadgeReplacement(){return(0,s.categoryLinkHTML)(this.args.ctx.category,{allowUncategorized:!0})}}e.default=n,(0,t.setComponentTemplate)(i,n)})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/group",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"T6BTDq6h",block:'[[[41,[30,1,["group"]],[[[1,"  "],[10,3],[15,6,[29,[[30,1,["baseuri"]],"/groups/",[30,1,["group","name"]]]]],[12],[1,[30,1,["group","name"]]],[13],[1,"\\n"]],[]],[[[1,"  "],[1,[30,1,["id"]]],[1,"\\n"]],[]]]],["@ctx"],false,["if","a"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/group.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"group"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/html",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"i0ad8qW6",block:'[[[1,[28,[35,0],[[30,1,["value"]]],null]]],["@ctx"],false,["html-safe"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/html.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"html"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/json",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","@ember/service","discourse/components/modal/fullscreen-code","@ember/template-factory"],(function(e,t,r,s,o,i,n,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const l=(0,a.createTemplateFactory)({id:"hzNhpBQp",block:'[[[10,0],[14,0,"result-json"],[12],[1,"\\n  "],[10,0],[14,0,"result-json-value"],[12],[1,[30,1,["value"]]],[13],[1,"\\n  "],[8,[39,1],[[24,0,"result-json-button"]],[["@action","@icon","@title"],[[28,[37,2],[[30,0],"viewJson"],null],"ellipsis","explorer.view_json"]],null],[1,"\\n"],[13]],["@ctx"],false,["div","d-button","action"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/json.hbs",isStrictMode:!1})
class u extends r.default{static#e=(()=>dt7948.g(this.prototype,"dialog",[i.service]))()
#h=(()=>{dt7948.i(this,"dialog")})()
static#t=(()=>dt7948.g(this.prototype,"modal",[i.service]))()
#g=(()=>{dt7948.i(this,"modal")})()
get parsedJson(){try{return JSON.parse(this.args.ctx.value)}catch{return null}}static#o=(()=>dt7948.n(this.prototype,"parsedJson",[s.cached]))()
viewJson(){this.modal.show(n.default,{model:{code:this.parsedJson?JSON.stringify(this.parsedJson,null,2):this.args.ctx.value,codeClasses:""}})}static#n=(()=>dt7948.n(this.prototype,"viewJson",[o.action]))()}e.default=u,(0,t.setComponentTemplate)(l,u)})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/post",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"NSV9JAcl",block:'[[[41,[30,1,["post"]],[[[1,"  "],[10,"aside"],[14,0,"quote"],[15,"data-post",[30,1,["post","post_number"]]],[15,"data-topic",[30,1,["post","topic_id"]]],[12],[1,"\\n    "],[10,0],[14,0,"title"],[12],[1,"\\n      "],[10,0],[14,0,"quote-controls"],[12],[1,"\\n"],[1,"        "],[10,3],[15,6,[29,["/t/via-quote/",[30,1,["post","topic_id"]],"/",[30,1,["post","post_number"]]]]],[14,"title","go to the quoted post"],[14,0,"quote-other-topic"],[12],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,3],[14,0,"result-post-link"],[15,6,[29,["/t/",[30,1,["post","topic_id"]],"/",[30,1,["post","post_number"]]]]],[12],[1,"\\n        "],[1,[28,[35,4],[[30,1,["post"]]],[["imageSize"],["tiny"]]]],[1,[30,1,["post","username"]]],[1,":\\n      "],[13],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,"blockquote"],[12],[1,"\\n      "],[10,2],[12],[1,"\\n        "],[1,[28,[35,7],[[30,1,["post","excerpt"]]],null]],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"]],[]],[[[1,"  "],[1,[30,1,["id"]]],[1,"\\n"]],[]]]],["@ctx"],false,["if","aside","div","a","avatar","blockquote","p","html-safe"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/post.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"post"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/reltime",["exports","@ember/component","@glimmer/component","@ember/template","discourse/lib/formatter","@ember/template-factory"],(function(e,t,r,s,o,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const n=(0,i.createTemplateFactory)({id:"Qf3v0/KO",block:'[[[1,[30,0,["boundDateReplacement"]]]],[],false,[]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/reltime.hbs",isStrictMode:!1})
class a extends r.default{get boundDateReplacement(){return(0,s.htmlSafe)((0,o.autoUpdatingRelativeAge)(new Date(this.args.ctx.value),{title:!0}))}}e.default=a,(0,t.setComponentTemplate)(n,a)})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/text",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"nlXzG5uv",block:'[[[1,[30,1]]],["@textValue"],false,[]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/text.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"text"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/topic",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"qH65FsyS",block:'[[[41,[30,1,["topic"]],[[[1,"  "],[10,3],[15,6,[29,[[30,1,["baseuri"]],"/t/",[30,1,["topic","slug"]],"/",[30,1,["topic","id"]]]]],[12],[1,"\\n    "],[1,[28,[35,2],[[30,1,["topic","fancy_title"]]],null]],[1,"\\n  "],[13],[1,"\\n  ("],[1,[30,1,["topic","posts_count"]]],[1,")\\n"]],[]],[[[1,"  "],[10,3],[15,6,[29,[[30,1,["baseuri"]],"/t/",[30,1,["id"]]]]],[12],[1,[30,1,["id"]]],[13],[1,"\\n"]],[]]]],["@ctx"],false,["if","a","html-safe"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/topic.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"topic"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/url",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"hXN19bWH",block:'[[[10,3],[15,6,[30,1,["href"]]],[12],[1,[30,1,["target"]]],[13]],["@ctx"],false,["a"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/url.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"url"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/user",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,s.createTemplateFactory)({id:"NUfLDSc5",block:'[[[41,[30,1,["user"]],[[[1,"  "],[10,3],[15,6,[29,[[30,1,["baseuri"]],"/u/",[30,1,["user","username"]],"/activity"]]],[15,"data-user-card",[30,1,["user","username"]]],[12],[1,"\\n    "],[1,[28,[35,2],[[30,1,["user"]]],[["imageSize"],["tiny"]]]],[1,"\\n    "],[1,[30,1,["user","username"]]],[1,"\\n  "],[13],[1,"\\n"]],[]],[[[1,"  "],[1,[30,1,["id"]]],[1,"\\n"]],[]]]],["@ctx"],false,["if","a","avatar"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/user.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(o,(0,r.default)(void 0,"user"))})),define("discourse/plugins/discourse-data-explorer/discourse/components/share-report",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","discourse/lib/decorators","discourse/lib/get-url","@ember/template-factory"],(function(e,t,r,s,o,i,n,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const l=(0,a.createTemplateFactory)({id:"MwI4cV66",block:'[[[10,0],[14,0,"share-report"],[12],[1,"\\n  "],[11,3],[24,6,"#"],[24,0,"share-report-button"],[4,[38,2],["click",[30,0,["open"]]],null],[12],[1,"\\n    "],[1,[28,[35,3],["link"],null]],[1,"\\n    "],[1,[30,1]],[1,"\\n  "],[13],[1,"\\n\\n"],[41,[30,0,["visible"]],[[[1,"    "],[11,0],[24,0,"popup"],[4,[38,5],[[30,0,["registerListeners"]]],null],[4,[38,6],[[30,0,["unregisterListeners"]]],null],[12],[1,"\\n      "],[10,"label"],[12],[1,[28,[35,8],["explorer.link"],null]],[1," "],[1,[30,1]],[13],[1,"\\n      "],[11,"input"],[16,2,[30,0,["link"]]],[24,4,"text"],[4,[38,5],[[30,0,["focusInput"]]],null],[12],[13],[1,"\\n\\n      "],[8,[39,10],[[24,0,"btn-flat close"]],[["@action","@icon","@aria-label","@title"],[[30,0,["close"]],"xmark","share.close","share.close"]],null],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[13]],["@group"],false,["div","a","on","d-icon","if","did-insert","will-destroy","label","i18n","input","d-button"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/share-report.hbs",isStrictMode:!1})
class u extends r.default{static#e=(()=>dt7948.g(this.prototype,"visible",[s.tracked],(function(){return!1})))()
#f=(()=>{dt7948.i(this,"visible")})()
element
get link(){return(0,n.default)(`/g/${this.args.group}/reports/${this.args.query.id}`)}mouseDownHandler(e){this.element.contains(e.target)||this.close()}static#t=(()=>dt7948.n(this.prototype,"mouseDownHandler",[i.bind]))()
keyDownHandler(e){27===e.keyCode&&this.close()}static#o=(()=>dt7948.n(this.prototype,"keyDownHandler",[i.bind]))()
registerListeners(e){!e||this.isDestroying||this.isDestroyed||(this.element=e,document.addEventListener("mousedown",this.mouseDownHandler),e.addEventListener("keydown",this.keyDownHandler))}static#n=(()=>dt7948.n(this.prototype,"registerListeners",[o.action]))()
unregisterListeners(e){this.element=e,document.removeEventListener("mousedown",this.mouseDownHandler),e.removeEventListener("keydown",this.keyDownHandler)}static#a=(()=>dt7948.n(this.prototype,"unregisterListeners",[o.action]))()
focusInput(e){e.select(),e.focus()}static#l=(()=>dt7948.n(this.prototype,"focusInput",[o.action]))()
open(e){e.preventDefault(),this.visible=!0}static#u=(()=>dt7948.n(this.prototype,"open",[o.action]))()
close(){this.visible=!1}static#p=(()=>dt7948.n(this.prototype,"close",[o.action]))()}e.default=u,(0,t.setComponentTemplate)(l,u)})),define("discourse/plugins/discourse-data-explorer/discourse/connectors/group-reports-nav-item/nav-item",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={shouldRender:e=>e.group.has_visible_data_explorer_queries}})),define("discourse/plugins/discourse-data-explorer/discourse/controllers/admin-plugins-explorer-index",["exports","@glimmer/tracking","@ember/controller","@ember/object","@ember/service","rsvp","discourse/lib/ajax-error","discourse/lib/decorators","discourse-i18n"],(function(e,t,r,s,o,i,n,a,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class u extends r.default{static#e=(()=>dt7948.g(this.prototype,"dialog",[o.service]))()
#h=(()=>{dt7948.i(this,"dialog")})()
static#t=(()=>dt7948.g(this.prototype,"appEvents",[o.service]))()
#y=(()=>{dt7948.i(this,"appEvents")})()
static#o=(()=>dt7948.g(this.prototype,"router",[o.service]))()
#b=(()=>{dt7948.i(this,"router")})()
static#n=(()=>dt7948.g(this.prototype,"sortByProperty",[t.tracked],(function(){return"last_run_at"})))()
#_=(()=>{dt7948.i(this,"sortByProperty")})()
static#a=(()=>dt7948.g(this.prototype,"sortDescending",[t.tracked],(function(){return!0})))()
#x=(()=>{dt7948.i(this,"sortDescending")})()
static#l=(()=>dt7948.g(this.prototype,"params",[t.tracked]))()
#v=(()=>{dt7948.i(this,"params")})()
static#u=(()=>dt7948.g(this.prototype,"search",[t.tracked]))()
#w=(()=>{dt7948.i(this,"search")})()
static#p=(()=>dt7948.g(this.prototype,"newQueryName",[t.tracked]))()
#k=(()=>{dt7948.i(this,"newQueryName")})()
static#T=(()=>dt7948.g(this.prototype,"showCreate",[t.tracked]))()
#S=(()=>{dt7948.i(this,"showCreate")})()
static#q=(()=>dt7948.g(this.prototype,"loading",[t.tracked],(function(){return!1})))()
#s=(()=>{dt7948.i(this,"loading")})()
queryParams=["id"]
explain=!1
acceptedImportFileTypes=["application/json"]
order=null
form=null
get sortedQueries(){const e=this.model.sortBy(this.sortByProperty)
return this.sortDescending?e.reverse():e}get parsedParams(){return this.params?JSON.parse(this.params):null}get filteredContent(){const e=new RegExp(this.search,"i")
return this.sortedQueries.filter((t=>e.test(t.name)||e.test(t.description)))}get createDisabled(){return 0===(this.newQueryName||"").trim().length}addCreatedRecord(e){this.model.pushObject(e),this.router.transitionTo("adminPlugins.explorer.queries.details",e.id)}async _importQuery(e){const t=await this._readFileAsTextAsync(e),r=this._parseQuery(t),s=this.store.createRecord("query",r)
return(await s.save()).target}_parseQuery(e){const t=JSON.parse(e).query
if(!t||!t.sql)throw new TypeError
return t.id=0,t}_readFileAsTextAsync(e){return new i.Promise(((t,r)=>{const s=new FileReader
s.onload=()=>{t(s.result)},s.onerror=r,s.readAsText(e)}))}dragMove(e){if(!e.movementY&&!e.movementX)return
const t=document.querySelector(".query-editor"),r=t.querySelector(".panels-flex"),s=t.querySelector(".grippie")
this.initialPaneWidth||this.originalPaneHeight||(this.originalPaneWidth=r.clientWidth,this.originalPaneHeight=r.clientHeight)
const o=Math.max(this.originalPaneHeight,r.clientHeight+e.movementY),i=Math.max(this.originalPaneWidth,r.clientWidth+e.movementX)
r.style.height=o+"px",r.style.width=i+"px",s.style.width=i+"px",this.appEvents.trigger("ace:resize")}static#C=(()=>dt7948.n(this.prototype,"dragMove",[a.bind]))()
scrollTop(){window.scrollTo(0,0)}static#N=(()=>dt7948.n(this.prototype,"scrollTop",[a.bind]))()
async import(e){try{this.loading=!0
const t=e[0],r=await this._importQuery(t)
this.addCreatedRecord(r)}catch(t){t.jqXHR?(0,n.popupAjaxError)(t):t instanceof SyntaxError?this.dialog.alert((0,l.i18n)("explorer.import.unparseable_json")):t instanceof TypeError?this.dialog.alert((0,l.i18n)("explorer.import.wrong_json")):(this.dialog.alert((0,l.i18n)("errors.desc.unknown")),console.error(t))}finally{this.loading=!1}}static#P=(()=>dt7948.n(this.prototype,"import",[s.action]))()
displayCreate(){this.showCreate=!0}static#j=(()=>dt7948.n(this.prototype,"displayCreate",[s.action]))()
updateSortProperty(e){this.sortByProperty===e?this.sortDescending=!this.sortDescending:(this.sortByProperty=e,this.sortDescending=!0)}static#O=(()=>dt7948.n(this.prototype,"updateSortProperty",[s.action]))()
async create(){try{const e=this.newQueryName.trim()
this.loading=!0,this.showCreate=!1
const t=await this.store.createRecord("query",{name:e}).save()
this.addCreatedRecord(t.target)}catch(e){(0,n.popupAjaxError)(e)}finally{this.loading=!1}}static#M=(()=>dt7948.n(this.prototype,"create",[s.action]))()
updateSearch(e){this.search=e}static#R=(()=>dt7948.n(this.prototype,"updateSearch",[s.action]))()
updateNewQueryName(e){this.newQueryName=e}static#D=(()=>dt7948.n(this.prototype,"updateNewQueryName",[s.action]))()}e.default=u}))
define("discourse/plugins/discourse-data-explorer/discourse/controllers/admin-plugins-explorer-queries-details",["exports","@glimmer/tracking","@ember/controller","@ember/object","@ember/service","rsvp","discourse/lib/ajax","discourse/lib/ajax-error","discourse/lib/decorators","discourse/plugins/discourse-data-explorer/discourse/components/modal/query-help","discourse/plugins/discourse-data-explorer/discourse/components/param-input-form","discourse/plugins/discourse-data-explorer/discourse/models/query"],(function(e,t,r,s,o,i,n,a,l,u,d,c){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class p extends r.default{static#e=(()=>dt7948.g(this.prototype,"modal",[o.service]))()
#g=(()=>{dt7948.i(this,"modal")})()
static#t=(()=>dt7948.g(this.prototype,"appEvents",[o.service]))()
#y=(()=>{dt7948.i(this,"appEvents")})()
static#o=(()=>dt7948.g(this.prototype,"router",[o.service]))()
#b=(()=>{dt7948.i(this,"router")})()
static#n=(()=>dt7948.g(this.prototype,"params",[t.tracked]))()
#v=(()=>{dt7948.i(this,"params")})()
static#a=(()=>dt7948.g(this.prototype,"editingName",[t.tracked],(function(){return!1})))()
#E=(()=>{dt7948.i(this,"editingName")})()
static#l=(()=>dt7948.g(this.prototype,"editingQuery",[t.tracked],(function(){return!1})))()
#A=(()=>{dt7948.i(this,"editingQuery")})()
static#u=(()=>dt7948.g(this.prototype,"loading",[t.tracked],(function(){return!1})))()
#s=(()=>{dt7948.i(this,"loading")})()
static#p=(()=>dt7948.g(this.prototype,"showResults",[t.tracked],(function(){return!1})))()
#F=(()=>{dt7948.i(this,"showResults")})()
static#T=(()=>dt7948.g(this.prototype,"hideSchema",[t.tracked],(function(){return!1})))()
#i=(()=>{dt7948.i(this,"hideSchema")})()
static#q=(()=>dt7948.g(this.prototype,"results",[t.tracked],(function(){return this.model.results})))()
#I=(()=>{dt7948.i(this,"results")})()
static#C=(()=>dt7948.g(this.prototype,"dirty",[t.tracked],(function(){return!1})))()
#H=(()=>{dt7948.i(this,"dirty")})()
queryParams=["params"]
explain=!1
order=null
form=null
get saveDisabled(){return!this.dirty}get runDisabled(){return this.dirty}get parsedParams(){return this.params?JSON.parse(this.params):null}get editDisabled(){return parseInt(this.model.id,10)<0}get groupOptions(){return this.groups.filter((e=>0!==e.id)).map((e=>({id:e.id,name:e.name})))}async save(){try{this.loading=!0,await this.model.save(),this.dirty=!1,this.editingName=!1}catch(e){throw(0,a.popupAjaxError)(e),e}finally{this.loading=!1}}static#N=(()=>dt7948.n(this.prototype,"save",[s.action]))()
saveAndRun(){this.save().then((()=>this.run()))}static#P=(()=>dt7948.n(this.prototype,"saveAndRun",[s.action]))()
async _importQuery(e){const t=await this._readFileAsTextAsync(e),r=this._parseQuery(t),s=this.store.createRecord("query",r)
return(await s.save()).target}_parseQuery(e){const t=JSON.parse(e).query
if(!t||!t.sql)throw new TypeError
return t.id=0,t}_readFileAsTextAsync(e){return new i.Promise(((t,r)=>{const s=new FileReader
s.onload=()=>{t(s.result)},s.onerror=r,s.readAsText(e)}))}dragMove(e){if(!e.movementY&&!e.movementX)return
const t=document.querySelector(".query-editor"),r=t.querySelector(".panels-flex"),s=t.querySelector(".grippie")
this.initialPaneWidth||this.originalPaneHeight||(this.originalPaneWidth=r.clientWidth,this.originalPaneHeight=r.clientHeight)
const o=Math.max(this.originalPaneHeight,r.clientHeight+e.movementY),i=Math.max(this.originalPaneWidth,r.clientWidth+e.movementX)
r.style.height=o+"px",r.style.width=i+"px",s.style.width=i+"px",this.appEvents.trigger("ace:resize")}static#j=(()=>dt7948.n(this.prototype,"dragMove",[l.bind]))()
didStartDrag(){}static#O=(()=>dt7948.n(this.prototype,"didStartDrag",[l.bind]))()
didEndDrag(){}static#M=(()=>dt7948.n(this.prototype,"didEndDrag",[l.bind]))()
updateGroupIds(e){this.dirty=!0,this.model.set("group_ids",e)}static#R=(()=>dt7948.n(this.prototype,"updateGroupIds",[s.action]))()
updateHideSchema(e){this.hideSchema=e}static#D=(()=>dt7948.n(this.prototype,"updateHideSchema",[s.action]))()
editName(){this.editingName=!0}static#L=(()=>dt7948.n(this.prototype,"editName",[s.action]))()
editQuery(){this.editingQuery=!0}static#z=(()=>dt7948.n(this.prototype,"editQuery",[s.action]))()
download(){window.open(this.model.downloadUrl,"_blank")}static#B=(()=>dt7948.n(this.prototype,"download",[s.action]))()
goHome(){this.router.transitionTo("adminPlugins.explorer")}static#G=(()=>dt7948.n(this.prototype,"goHome",[s.action]))()
showHelpModal(){this.modal.show(u.default)}static#Q=(()=>dt7948.n(this.prototype,"showHelpModal",[s.action]))()
resetParams(){this.model.resetParams()}static#V=(()=>dt7948.n(this.prototype,"resetParams",[s.action]))()
async discard(){try{this.loading=!0
const e=await this.store.find("query",this.model.id)
this.model.setProperties(e.getProperties(c.default.updatePropertyNames)),this.model.group_ids&&Array.isArray(this.model.group_ids)||this.model.set("group_ids",[]),this.dirty=!1}catch(e){(0,a.popupAjaxError)(e)}finally{this.loading=!1}}static#U=(()=>dt7948.n(this.prototype,"discard",[s.action]))()
async destroyQuery(){try{this.loading=!0,this.showResults=!1,await this.store.destroyRecord("query",this.model),this.model.set("destroyed",!0)}catch(e){(0,a.popupAjaxError)(e)}finally{this.loading=!1}}static#J=(()=>dt7948.n(this.prototype,"destroyQuery",[s.action]))()
async recover(){try{this.loading=!0,this.showResults=!0,await this.model.save(),this.model.set("destroyed",!1)}catch(e){(0,a.popupAjaxError)(e)}finally{this.loading=!1}}static#W=(()=>dt7948.n(this.prototype,"recover",[s.action]))()
onRegisterApi(e){this.form=e}static#$=(()=>dt7948.n(this.prototype,"onRegisterApi",[s.action]))()
setDirty(){this.dirty=!0}static#X=(()=>dt7948.n(this.prototype,"setDirty",[s.action]))()
exitEdit(){this.editingName=!1}static#Y=(()=>dt7948.n(this.prototype,"exitEdit",[s.action]))()
async run(){let e=null
if(this.model.hasParams){try{e=await(this.form?.submit())}catch(t){if(t instanceof d.ParamValidationError)return}if(null==e)return}this.setProperties({loading:!0,showResults:!1,params:JSON.stringify(e)}),(0,n.ajax)("/admin/plugins/explorer/queries/"+this.model.id+"/run",{type:"POST",data:{params:JSON.stringify(e),explain:this.explain}}).then((e=>{this.results=e,e.success?this.showResults=!0:this.showResults=!1})).catch((e=>{this.showResults=!1,e.jqXHR&&422===e.jqXHR.status&&e.jqXHR.responseJSON?this.results=e.jqXHR.responseJSON:(0,a.popupAjaxError)(e)})).finally((()=>this.loading=!1))}static#K=(()=>dt7948.n(this.prototype,"run",[s.action]))()}e.default=p})),define("discourse/plugins/discourse-data-explorer/discourse/controllers/group-reports-index",["exports","@ember/controller"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class r extends t.default{}e.default=r})),define("discourse/plugins/discourse-data-explorer/discourse/controllers/group-reports-show",["exports","@glimmer/tracking","@ember/controller","@ember/object","@ember/service","discourse/components/modal/bookmark","discourse/lib/ajax","discourse/lib/ajax-error","discourse/lib/bookmark-form-data","discourse/lib/decorators","discourse/models/bookmark","discourse/plugins/discourse-data-explorer/discourse/components/param-input-form"],(function(e,t,r,s,o,i,n,a,l,u,d,c){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class p extends r.default{static#e=(()=>dt7948.g(this.prototype,"currentUser",[o.service]))()
#Z=(()=>{dt7948.i(this,"currentUser")})()
static#t=(()=>dt7948.g(this.prototype,"modal",[o.service]))()
#g=(()=>{dt7948.i(this,"modal")})()
static#o=(()=>dt7948.g(this.prototype,"router",[o.service]))()
#b=(()=>{dt7948.i(this,"router")})()
static#n=(()=>dt7948.g(this.prototype,"showResults",[t.tracked],(function(){return!1})))()
#F=(()=>{dt7948.i(this,"showResults")})()
static#a=(()=>dt7948.g(this.prototype,"loading",[t.tracked],(function(){return!1})))()
#s=(()=>{dt7948.i(this,"loading")})()
static#l=(()=>dt7948.g(this.prototype,"results",[t.tracked],(function(){return this.model.results})))()
#I=(()=>{dt7948.i(this,"results")})()
static#u=(()=>dt7948.g(this.prototype,"queryGroupBookmark",[t.tracked],(function(){return this.queryGroup?.bookmark})))()
#ee=(()=>{dt7948.i(this,"queryGroupBookmark")})()
queryParams=["params"]
form=null
explain=!1
get parsedParams(){return this.params?JSON.parse(this.params):null}get hasParams(){return this.model.param_info.length>0}get bookmarkLabel(){return this.queryGroupBookmark?"bookmarked.edit_bookmark":"bookmarked.title"}get bookmarkIcon(){return this.queryGroupBookmark&&this.queryGroupBookmark.reminder_at?d.WITH_REMINDER_ICON:d.NO_REMINDER_ICON}get bookmarkClassName(){return this.queryGroupBookmark?["query-group-bookmark","bookmarked"].join(" "):"query-group-bookmark"}async run(){try{let e=null
if(this.hasParams&&(e=await this.form.submit(),null==e))return
this.loading=!0,this.showResults=!1
const t=JSON.stringify(e)
this.router.transitionTo({queryParams:{params:e?t:null}})
const r=await(0,n.ajax)(`/g/${this.get("group.name")}/reports/${this.model.id}/run`,{type:"POST",data:{params:t,explain:this.explain}})
if(this.results=r,!r.success)return
this.showResults=!0}catch(e){422===e.jqXHR?.status&&e.jqXHR.responseJSON?this.results=e.jqXHR.responseJSON:e instanceof c.ParamValidationError||(0,a.popupAjaxError)(e)}finally{this.loading=!1}}static#p=(()=>dt7948.n(this.prototype,"run",[u.bind]))()
toggleBookmark(){const e=this.queryGroupBookmark||this.store.createRecord("bookmark",{bookmarkable_type:"DiscourseDataExplorer::QueryGroup",bookmarkable_id:this.queryGroup.id,user_id:this.currentUser.id})
return this.modal.show(i.default,{model:{bookmark:new l.BookmarkFormData(e),afterSave:e=>{const t=this.store.createRecord("bookmark",e.saveData)
this.queryGroupBookmark=t,this.appEvents.trigger("bookmarks:changed",e.saveData,t.attachedTo())},afterDelete:()=>{this.queryGroupBookmark=null}}})}static#T=(()=>dt7948.n(this.prototype,"toggleBookmark",[s.action]))()
onRegisterApi(e){this.form=e}static#q=(()=>dt7948.n(this.prototype,"onRegisterApi",[s.action]))()}e.default=p})),define("discourse/plugins/discourse-data-explorer/discourse/explorer-route-map",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={resource:"admin.adminPlugins",path:"/plugins",map(){this.route("explorer",(function(){this.route("queries",(function(){this.route("details",{path:"/:query_id"})}))}))}}})),define("discourse/plugins/discourse-data-explorer/discourse/group-reports-route-map",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={resource:"group",map(){this.route("reports",(function(){this.route("show",{path:"/:query_id"})}))}}})),define("discourse/plugins/discourse-data-explorer/discourse/initializers/initialize-data-explorer",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={name:"initialize-data-explorer",initialize(e){e.lookup("service:store").addPluralization("query","queries")}}})),define("discourse/plugins/discourse-data-explorer/discourse/lib/themeColor",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return getComputedStyle(document.body).getPropertyValue(e)}})),define("discourse/plugins/discourse-data-explorer/discourse/models/query",["exports","@ember/object","discourse/lib/get-url","discourse/models/rest"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class o extends s.default{static updatePropertyNames=["name","description","sql","user_id","created_at","group_ids","last_run_at"]
params={}
constructor(){super(...arguments),this.param_info?.resetParams()}get downloadUrl(){return(0,r.default)(`/admin/plugins/explorer/queries/${this.id}.json?export=1`)}get hasParams(){return this.param_info.length&&!this.updating}static#e=(()=>dt7948.n(this.prototype,"hasParams",[(0,t.computed)("param_info","updating")]))()
beforeUpdate(){this.set("updating",!0)}afterUpdate(){this.set("updating",!1)}resetParams(){const e={},t=this.params
this.param_info.forEach((r=>{const s=r.identifier
t[r.identifier]?e[s]=t[s]:null!==r.default?e[s]=r.default:"boolean"===r.type?e[s]="false":"user_id"===r.type||"user_list"===r.type||"group_list"===r.type?e[s]=null:e[s]=""})),this.params=e}updateProperties(){const e=this.getProperties(o.updatePropertyNames)
return this.destroyed&&(e.id=this.id),e}createProperties(){return this.sql?this.updateProperties():this.getProperties("name")}}e.default=o})),define("discourse/plugins/discourse-data-explorer/discourse/routes/admin-plugins-explorer-index",["exports","@ember/service","discourse/lib/ajax","discourse/routes/discourse"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class o extends s.default{static#e=(()=>dt7948.g(this.prototype,"router",[t.service]))()
#b=(()=>{dt7948.i(this,"router")})()
beforeModel(e){e.to.queryParams.id&&this.router.transitionTo("adminPlugins.explorer.queries.details",e.to.queryParams.id)}model(){if(!this.currentUser.admin)return{model:null,schema:null,disallow:!0,groups:null}
const e=(0,r.ajax)("/admin/plugins/explorer/groups.json"),t=this.store.findAll("query")
return e.then((e=>{let r={}
return e.forEach((e=>{r[e.id]=e.name})),t.then((t=>(t.forEach((e=>{e.set("group_names",(e.group_ids||[]).map((e=>r[e])))})),{model:t,groups:e})))}))}setupController(e,t){e.setProperties(t)}}e.default=o})),define("discourse/plugins/discourse-data-explorer/discourse/routes/admin-plugins-explorer-queries-details",["exports","discourse/lib/ajax","discourse/routes/discourse"],(function(e,t,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class s extends r.default{model(e){if(!this.currentUser.admin)return{model:null,schema:null,disallow:!0,groups:null}
const r=(0,t.ajax)("/admin/plugins/explorer/groups.json"),s=(0,t.ajax)("/admin/plugins/explorer/schema.json",{cache:!0}),o=this.store.find("query",e.query_id)
return r.then((e=>{let t={}
return e.forEach((e=>{t[e.id]=e.name})),s.then((r=>o.then((s=>(s.set("group_names",(s.group_ids||[]).map((e=>t[e]))),{model:s,schema:r,groups:e})))))}))}setupController(e,t){e.setProperties(t)}}e.default=s})),define("discourse/plugins/discourse-data-explorer/discourse/routes/group-reports-index",["exports","@ember/service","discourse/lib/ajax","discourse/routes/discourse"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class o extends s.default{static#e=(()=>dt7948.g(this.prototype,"router",[t.service]))()
#b=(()=>{dt7948.i(this,"router")})()
model(){const e=this.modelFor("group")
return(0,r.ajax)(`/g/${e.name}/reports`).then((t=>({model:t,group:e}))).catch((()=>this.router.transitionTo("group.members",e)))}afterModel(e){e.group.get("is_group_user")||this.currentUser&&this.currentUser.admin||this.router.transitionTo("group.members",e.group)}setupController(e,t){e.setProperties(t)}}e.default=o})),define("discourse/plugins/discourse-data-explorer/discourse/routes/group-reports-show",["exports","@ember/service","discourse/lib/ajax","discourse/routes/discourse"],(function(e,t,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class o extends s.default{static#e=(()=>dt7948.g(this.prototype,"router",[t.service]))()
#b=(()=>{dt7948.i(this,"router")})()
model(e){const t=this.modelFor("group")
return(0,r.ajax)(`/g/${t.name}/reports/${e.query_id}`).then((e=>{const r=e.query,s=e.query_group,o=r.param_info.reduce(((e,t)=>(e[t.identifier]=t.default,e)),{})
return{model:Object.assign({params:o},r),group:t,queryGroup:s,results:null,showResults:!1}})).catch((()=>{this.router.transitionTo("group.members",t)}))}setupController(e,t){e.setProperties(t)}}e.default=o})),define("discourse/plugins/discourse-data-explorer/discourse/templates/admin/plugins-explorer-index",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.createTemplateFactory)({id:"rU2Qd1Kv",block:'[[[41,[30,0,["disallow"]],[[[1,"  "],[10,"h1"],[12],[1,[28,[35,2],["explorer.admins_only"],null]],[13],[1,"\\n"]],[]],[[[1,"  "],[10,0],[14,0,"query-list"],[12],[1,"\\n    "],[8,[39,4],null,[["@value","@placeholderKey","@onChange"],[[30,0,["search"]],"explorer.search_placeholder",[30,0,["updateSearch"]]]],null],[1,"\\n    "],[8,[39,5],[[24,0,"no-text btn-right"]],[["@action","@icon"],[[30,0,["displayCreate"]],"plus"]],null],[1,"\\n    "],[8,[39,6],[[24,0,"import-btn"]],[["@label","@icon","@acceptedFormatsOverride","@showButton","@onFilesPicked"],["explorer.import.label","upload",[30,0,["acceptedImportFileTypes"]],"true",[30,0,["import"]]]],null],[1,"\\n  "],[13],[1,"\\n\\n"],[41,[30,0,["showCreate"]],[[[1,"    "],[10,0],[14,0,"query-create"],[12],[1,"\\n      "],[8,[39,4],null,[["@value","@placeholderKey","@onChange"],[[30,0,["newQueryName"]],"explorer.create_placeholder",[30,0,["updateNewQueryName"]]]],null],[1,"\\n      "],[8,[39,5],null,[["@action","@disabled","@label","@icon"],[[30,0,["create"]],[30,0,["createDisabled"]],"explorer.create","plus"]],null],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["othersDirty"]],[[[1,"    "],[10,0],[14,0,"warning"],[12],[1,"\\n      "],[1,[28,[35,7],["triangle-exclamation"],null]],[1,"\\n      "],[1,[28,[35,2],["explorer.others_dirty"],null]],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["model","length"]],[[[1,"    "],[8,[39,8],null,[["@condition"],[[30,0,["loading"]]]],null],[1,"\\n\\n    "],[10,0],[14,0,"container"],[12],[1,"\\n      "],[10,"table"],[14,0,"d-admin-table recent-queries"],[12],[1,"\\n        "],[10,"thead"],[14,0,"heading-container"],[12],[1,"\\n          "],[10,"th"],[14,0,"col heading name"],[12],[1,"\\n            "],[11,0],[24,"role","button"],[24,0,"heading-toggle"],[4,[38,12],["click",[28,[37,13],[[30,0,["updateSortProperty"]],"name"],null]],null],[12],[1,"\\n              "],[8,[39,14],null,[["@field","@labelKey","@order","@asc","@automatic"],["name","explorer.query_name",[30,0,["order"]],[28,[37,15],[[30,0,["sortDescending"]]],null],"true"]],null],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n          "],[10,"th"],[14,0,"col heading created-by"],[12],[1,"\\n            "],[11,0],[24,"role","button"],[24,0,"heading-toggle"],[4,[38,12],["click",[28,[37,13],[[30,0,["updateSortProperty"]],"username"],null]],null],[12],[1,"\\n              "],[8,[39,14],null,[["@field","@labelKey","@order","@asc","@automatic"],["username","explorer.query_user",[30,0,["order"]],[28,[37,15],[[30,0,["sortDescending"]]],null],"true"]],null],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n          "],[10,"th"],[14,0,"col heading group-names"],[12],[1,"\\n            "],[10,0],[14,0,"group-names-header"],[12],[1,"\\n              "],[1,[28,[35,2],["explorer.query_groups"],null]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n          "],[10,"th"],[14,0,"col heading created-at"],[12],[1,"\\n            "],[11,0],[24,"role","button"],[24,0,"heading-toggle"],[4,[38,12],["click",[28,[37,13],[[30,0,["updateSortProperty"]],"last_run_at"],null]],null],[12],[1,"\\n              "],[8,[39,14],null,[["@field","@labelKey","@order","@asc","@automatic"],["last_run_at","explorer.query_time",[30,0,["order"]],[28,[37,15],[[30,0,["sortDescending"]]],null],"true"]],null],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n        "],[10,"tbody"],[12],[1,"\\n"],[42,[28,[37,18],[[28,[37,18],[[30,0,["filteredContent"]]],null]],null],null,[[[1,"            "],[10,"tr"],[14,0,"d-admin-row__content query-row"],[12],[1,"\\n              "],[10,"td"],[14,0,"d-admin-row__overview"],[12],[1,"\\n                "],[11,3],[16,6,[29,["/admin/plugins/explorer/queries/",[30,1,["id"]]]]],[4,[38,12],["click",[30,0,["scrollTop"]]],null],[12],[1,"\\n                  "],[10,"b"],[14,0,"query-name"],[12],[1,[30,1,["name"]]],[13],[1,"\\n                  "],[10,"medium"],[14,0,"query-desc"],[12],[1,[30,1,["description"]]],[13],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n              "],[10,"td"],[14,0,"d-admin-row__detail query-created-by"],[12],[1,"\\n                "],[10,0],[14,0,"d-admin-row__mobile-label"],[12],[1,"\\n                  "],[1,[28,[35,2],["explorer.query_user"],null]],[1,"\\n                "],[13],[1,"\\n"],[41,[30,1,["username"]],[[[1,"                  "],[10,0],[12],[1,"\\n                    "],[10,3],[15,6,[29,["/u/",[30,1,["username"]],"/activity"]]],[12],[1,"\\n                      "],[10,"medium"],[12],[1,[30,1,["username"]]],[13],[1,"\\n                    "],[13],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[1,"              "],[13],[1,"\\n              "],[10,"td"],[14,0,"d-admin-row__detail query-group-names"],[12],[1,"\\n                "],[10,0],[14,0,"d-admin-row__mobile-label"],[12],[1,"\\n                  "],[1,[28,[35,2],["explorer.query_groups"],null]],[1,"\\n                "],[13],[1,"\\n                "],[10,0],[14,0,"group-names"],[12],[1,"\\n"],[42,[28,[37,18],[[28,[37,18],[[30,1,["group_names"]]],null]],null],null,[[[1,"                    "],[8,[39,24],null,[["@group","@query"],[[30,2],[30,1]]],null],[1,"\\n"]],[2]],null],[1,"                "],[13],[1,"\\n              "],[13],[1,"\\n              "],[10,"td"],[14,0,"d-admin-row__detail query-created-at"],[12],[1,"\\n                "],[10,0],[14,0,"d-admin-row__mobile-label"],[12],[1,"\\n                  "],[1,[28,[35,2],["explorer.query_time"],null]],[1,"\\n                "],[13],[1,"\\n"],[41,[30,1,["last_run_at"]],[[[1,"                  "],[10,"medium"],[12],[1,"\\n                    "],[1,[28,[35,25],[[30,1,["last_run_at"]]],null]],[1,"\\n                  "],[13],[1,"\\n"]],[]],[[[41,[30,1,["created_at"]],[[[1,"                  "],[10,"medium"],[12],[1,"\\n                    "],[1,[28,[35,25],[[30,1,["created_at"]]],null]],[1,"\\n                  "],[13],[1,"\\n                "]],[]],null]],[]]],[1,"              "],[13],[1,"\\n            "],[13],[1,"\\n"]],[1]],[[[1,"            "],[10,"br"],[12],[13],[1,"\\n            "],[10,"em"],[14,0,"no-search-results"],[12],[1,"\\n              "],[1,[28,[35,2],["explorer.no_search_results"],null]],[1,"\\n            "],[13],[1,"\\n"]],[]]],[1,"        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"explorer-pad-bottom"],[12],[13],[1,"\\n"]],[]],null]],[]]]],["query","group"],false,["if","h1","i18n","div","text-field","d-button","pick-files-button","d-icon","conditional-loading-spinner","table","thead","th","on","fn","table-header-toggle","not","tbody","each","-track-array","tr","td","a","b","medium","share-report","bound-date","br","em"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/templates/admin/plugins-explorer-index.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-data-explorer/discourse/templates/admin/plugins-explorer-queries-details",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.createTemplateFactory)({id:"PeASTSPk",block:'[[[41,[30,0,["disallow"]],[[[1,"  "],[10,"h1"],[12],[1,[28,[35,2],["explorer.admins_only"],null]],[13],[1,"\\n"]],[]],[[[1,"\\n  "],[10,0],[15,0,[29,["query-edit ",[52,[30,0,["editName"]],"editing"]]]],[12],[1,"\\n"],[41,[30,0,["editingName"]],[[[1,"      "],[10,0],[14,0,"name"],[12],[1,"\\n        "],[8,[39,4],[[24,0,"previous"]],[["@action","@icon"],[[30,0,["goHome"]],"chevron-left"]],null],[1,"\\n        "],[8,[39,4],[[24,0,"previous"]],[["@action","@icon"],[[30,0,["exitEdit"]],"xmark"]],null],[1,"\\n        "],[10,0],[14,0,"name-text-field"],[12],[1,"\\n          "],[8,[39,5],null,[["@value","@onChange"],[[30,0,["model","name"]],[30,0,["setDirty"]]]],null],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,0],[14,0,"desc"],[12],[1,"\\n        "],[8,[39,6],null,[["@value","@placeholder","@input"],[[30,0,["model","description"]],[28,[37,2],["explorer.description_placeholder"],null],[30,0,["setDirty"]]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],[[[1,"      "],[10,0],[14,0,"name"],[12],[1,"\\n        "],[8,[39,4],[[24,0,"previous"]],[["@action","@icon"],[[30,0,["goHome"]],"chevron-left"]],null],[1,"\\n\\n        "],[10,"h1"],[12],[1,"\\n          "],[1,[30,0,["model","name"]]],[1,"\\n"],[41,[51,[30,0,["editDisabled"]]],[[[1,"            "],[11,3],[24,6,""],[24,0,"edit-query-name"],[4,[38,9],[[30,0],"editName"],null],[12],[1,"\\n              "],[1,[28,[35,10],["pencil"],null]],[1,"\\n            "],[13],[1,"\\n"]],[]],null],[1,"        "],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,0],[14,0,"desc"],[12],[1,"\\n        "],[1,[30,0,["model","description"]]],[1,"\\n      "],[13],[1,"\\n"]],[]]],[1,"\\n"],[41,[51,[30,0,["model","destroyed"]]],[[[1,"      "],[10,0],[14,0,"groups"],[12],[1,"\\n        "],[10,1],[14,0,"label"],[12],[1,[28,[35,2],["explorer.allow_groups"],null]],[13],[1,"\\n        "],[10,1],[12],[1,"\\n          "],[8,[39,12],null,[["@value","@content","@options","@onChange"],[[30,0,["model","group_ids"]],[30,0,["groupOptions"]],[28,[37,13],null,[["allowAny"],[false]]],[30,0,["updateGroupIds"]]]],null],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n    "],[10,0],[14,0,"clear"],[12],[13],[1,"\\n\\n"],[41,[30,0,["editingQuery"]],[[[1,"      "],[10,0],[15,0,[29,["query-editor ",[52,[30,0,["hideSchema"]],"no-schema"]]]],[12],[1,"\\n        "],[10,0],[14,0,"panels-flex"],[12],[1,"\\n          "],[10,0],[14,0,"editor-panel"],[12],[1,"\\n            "],[8,[39,14],[[4,[38,17],["click",[30,0,["setDirty"]]],null]],[["@content","@onChange","@mode","@disabled","@save","@submit"],[[30,0,["model","sql"]],[28,[37,15],[[28,[37,16],[[30,0,["model","sql"]]],null]],null],"sql",[30,0,["model","destroyed"]],[30,0,["save"]],[30,0,["saveAndRun"]]]],null],[1,"\\n          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"right-panel"],[12],[1,"\\n            "],[8,[39,18],null,[["@schema","@hideSchema","@updateHideSchema"],[[30,0,["schema"]],[30,0,["hideSchema"]],[30,0,["updateHideSchema"]]]],null],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n\\n        "],[11,0],[24,0,"grippie"],[4,[38,19],null,[["didStartDrag","didEndDrag","dragMove"],[[30,0,["didStartDrag"]],[30,0,["didEndDrag"]],[30,0,["dragMove"]]]]],[12],[1,"\\n          "],[1,[28,[35,10],["discourse-expand"],null]],[1,"\\n        "],[13],[1,"\\n\\n        "],[10,0],[14,0,"clear"],[12],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],[[[1,"      "],[10,0],[14,0,"sql"],[12],[1,"\\n        "],[8,[39,20],null,[["@value","@codeClass","@setDirty"],[[30,0,["model","sql"]],"sql",[30,0,["setDirty"]]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]]],[1,"\\n    "],[10,0],[14,0,"clear"],[12],[13],[1,"\\n\\n    "],[10,0],[14,0,"pull-left left-buttons"],[12],[1,"\\n"],[41,[30,0,["editingQuery"]],[[[1,"        "],[8,[39,4],[[24,0,"btn-save-query"]],[["@action","@label","@disabled"],[[30,0,["save"]],"explorer.save",[30,0,["saveDisabled"]]]],null],[1,"\\n"]],[]],[[[41,[51,[30,0,["editDisabled"]]],[[[1,"          "],[8,[39,4],[[24,0,"btn-edit-query"]],[["@action","@label","@icon"],[[30,0,["editQuery"]],"explorer.edit","pencil"]],null],[1,"\\n"]],[]],null]],[]]],[1,"\\n      "],[8,[39,4],null,[["@action","@label","@disabled","@icon"],[[30,0,["download"]],"explorer.export",[30,0,["runDisabled"]],"download"]],null],[1,"\\n\\n"],[41,[30,0,["editingQuery"]],[[[1,"        "],[8,[39,4],null,[["@action","@label","@icon"],[[30,0,["showHelpModal"]],"explorer.help.label","circle-question"]],null],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"pull-right right-buttons"],[12],[1,"\\n"],[41,[30,0,["model","destroyed"]],[[[1,"        "],[8,[39,4],null,[["@action","@icon","@label"],[[30,0,["recover"]],"arrow-rotate-left","explorer.recover"]],null],[1,"\\n"]],[]],[[[41,[30,0,["editingQuery"]],[[[1,"          "],[8,[39,4],null,[["@action","@icon","@label","@disabled"],[[30,0,["discard"]],"arrow-rotate-left","explorer.undo",[30,0,["saveDisabled"]]]],null],[1,"\\n"]],[]],null],[1,"\\n        "],[8,[39,4],[[24,0,"btn-danger"]],[["@action","@icon","@label"],[[30,0,["destroyQuery"]],"trash-can","explorer.delete"]],null],[1,"\\n"]],[]]],[1,"    "],[13],[1,"\\n    "],[10,0],[14,0,"clear"],[12],[13],[1,"\\n  "],[13],[1,"\\n\\n  "],[11,"form"],[24,0,"query-run"],[4,[38,17],["submit",[30,0,["run"]]],null],[12],[1,"\\n"],[41,[30,0,["model","hasParams"]],[[[1,"      "],[8,[39,22],null,[["@initialValues","@paramInfo","@onRegisterApi"],[[30,0,["parsedParams"]],[30,0,["model","param_info"]],[30,0,["onRegisterApi"]]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["runDisabled"]],[[[41,[30,0,["saveDisabled"]],[[[1,"        "],[8,[39,4],[[24,0,"btn-primary"]],[["@label","@disabled"],["explorer.run","true"]],null],[1,"\\n"]],[]],[[[1,"        "],[8,[39,4],[[24,0,"btn-primary"]],[["@action","@icon","@label"],[[30,0,["saveAndRun"]],"play","explorer.saverun"]],null],[1,"\\n"]],[]]]],[]],[[[1,"      "],[8,[39,4],[[24,0,"btn-primary"]],[["@action","@icon","@label","@disabled","@type"],[[30,0,["run"]],"play","explorer.run",[30,0,["runDisabled"]],"submit"]],null],[1,"\\n"]],[]]],[1,"\\n    "],[10,"label"],[14,0,"query-plan"],[12],[1,"\\n      "],[8,[39,24],[[24,3,"explain"]],[["@type","@checked"],["checkbox",[30,0,["explain"]]]],null],[1,"\\n      "],[1,[28,[35,2],["explorer.explain_label"],null]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n  "],[10,"hr"],[12],[13],[1,"\\n\\n  "],[8,[39,26],null,[["@condition"],[[30,0,["loading"]]]],null],[1,"\\n\\n  "],[8,[39,27],null,[["@results","@showResults","@query","@content"],[[30,0,["results"]],[30,0,["showResults"]],[30,0,["model"]],[30,0,["results"]]]],null],[1,"\\n"]],[]]]],[],false,["if","h1","i18n","div","d-button","text-field","d-textarea","unless","a","action","d-icon","span","multi-select","hash","ace-editor","fn","mut","on","explorer-schema","draggable","code-view","form","param-input-form","label","input","hr","conditional-loading-spinner","query-results-wrapper"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/templates/admin/plugins-explorer-queries-details.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-data-explorer/discourse/templates/connectors/group-reports-nav-item/nav-item",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.createTemplateFactory)({id:"C6vpZXij",block:'[[[8,[39,0],null,[["@route"],["group.reports"]],[["default"],[[[[1,"\\n  "],[1,[28,[35,1],["chart-bar"],null]],[1,[28,[35,2],["group.reports"],null]],[1,"\\n"]],[]]]]]],[],false,["link-to","d-icon","i18n"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/templates/connectors/group-reports-nav-item/nav-item.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-data-explorer/discourse/templates/group-reports-index",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.createTemplateFactory)({id:"wdWTUud9",block:'[[[10,"section"],[14,0,"user-content"],[12],[1,"\\n  "],[10,"table"],[14,0,"group-reports"],[12],[1,"\\n    "],[10,"thead"],[12],[1,"\\n      "],[10,"th"],[12],[1,"\\n        "],[1,[28,[35,4],["explorer.report_name"],null]],[1,"\\n      "],[13],[1,"\\n      "],[10,"th"],[12],[1,"\\n        "],[1,[28,[35,4],["explorer.query_description"],null]],[1,"\\n      "],[13],[1,"\\n      "],[10,"th"],[12],[1,"\\n        "],[1,[28,[35,4],["explorer.query_time"],null]],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n    "],[10,"tbody"],[12],[1,"\\n"],[42,[28,[37,7],[[28,[37,7],[[30,0,["model","queries"]]],null]],null],null,[[[1,"        "],[10,"tr"],[12],[1,"\\n          "],[10,"td"],[12],[1,"\\n            "],[8,[39,10],null,[["@route","@models"],["group.reports.show",[28,[37,11],[[30,0,["group","name"]],[30,1,["id"]]],null]]],[["default"],[[[[1,"\\n              "],[1,[30,1,["name"]]],[1,"\\n            "]],[]]]]],[1,"\\n          "],[13],[1,"\\n          "],[10,"td"],[12],[1,[30,1,["description"]]],[13],[1,"\\n          "],[10,"td"],[12],[1,"\\n"],[41,[30,1,["last_run_at"]],[[[1,"              "],[1,[28,[35,13],[[30,1,["last_run_at"]]],null]],[1,"\\n"]],[]],null],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[1]],null],[1,"    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["query"],false,["section","table","thead","th","i18n","tbody","each","-track-array","tr","td","link-to","array","if","bound-date"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/templates/group-reports-index.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-data-explorer/discourse/templates/group-reports-show",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.createTemplateFactory)({id:"w6B5dQM5",block:'[[[10,"section"],[14,0,"user-content"],[12],[1,"\\n  "],[10,"h1"],[12],[1,[30,0,["model","name"]]],[13],[1,"\\n  "],[10,2],[12],[1,[30,0,["model","description"]]],[13],[1,"\\n\\n  "],[11,"form"],[24,0,"query-run"],[4,[38,4],["submit",[30,0,["run"]]],null],[12],[1,"\\n"],[41,[30,0,["hasParams"]],[[[1,"      "],[8,[39,6],null,[["@initialValues","@paramInfo","@onRegisterApi"],[[30,0,["parsedParams"]],[30,0,["model","param_info"]],[30,0,["onRegisterApi"]]]],null],[1,"\\n"]],[]],null],[1,"\\n    "],[8,[39,7],[[24,0,"btn-primary"]],[["@action","@icon","@label","@type"],[[30,0,["run"]],"play","explorer.run","submit"]],null],[1,"\\n\\n    "],[8,[39,7],[[16,0,[30,0,["bookmarkClassName"]]]],[["@action","@label","@icon"],[[30,0,["toggleBookmark"]],[30,0,["bookmarkLabel"]],[30,0,["bookmarkIcon"]]]],null],[1,"\\n  "],[13],[1,"\\n\\n  "],[8,[39,8],null,[["@condition"],[[30,0,["loading"]]]],null],[1,"\\n\\n"],[41,[30,0,["results"]],[[[1,"    "],[10,0],[14,0,"query-results"],[12],[1,"\\n"],[41,[30,0,["showResults"]],[[[1,"        "],[8,[39,10],null,[["@query","@content","@group"],[[30,0,["model"]],[30,0,["results"]],[30,0,["group"]]]],null],[1,"\\n"]],[]],[[[42,[28,[37,12],[[28,[37,12],[[30,0,["results","errors"]]],null]],null],null,[[[1,"          "],[10,"pre"],[14,0,"query-error"],[12],[10,"code"],[12],[1,[30,1]],[13],[13],[1,"\\n"]],[1]],null]],[]]],[1,"    "],[13],[1,"\\n"]],[]],null],[13]],["err"],false,["section","h1","p","form","on","if","param-input-form","d-button","conditional-loading-spinner","div","query-result","each","-track-array","pre","code"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/templates/group-reports-show.hbs",isStrictMode:!1})}))

//# sourceMappingURL=discourse-data-explorer-69c0f8ef6ff25f736382aa168719e9b75a7b544b29a300c86653d17f0397961e.map
//!

;
